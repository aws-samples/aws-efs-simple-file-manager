{
  "Parameters": {
    "DeploymentPackageBucket": {
      "Type": "String",
      "Description": "Bucket that contains the dataplane deployment package"
    },
    "DeploymentPackageKey": {
      "Type": "String",
      "Description": "S3 Key of the dataplane deployment package"
    },
    "botoConfig": {
      "Type": "String",
      "Description": "Botocore config"
    },
    "ApiHandlerIamRole": {
      "Type": "String",
      "Description": "Arn of the API Handler IAM Role"
    }
  },
  "Resources": {
    "APIHandler": {
      "Properties": {
        "Runtime": "python3.8",
        "Role": {"Ref": "ApiHandlerIamRole"},
        "Environment": {
          "Variables": {
                "botoConfig": {
                  "Ref": "botoConfig"
                }
            }
        },
        "CodeUri": {"Bucket":  {"Ref": "DeploymentPackageBucket"}, "Key":  {"Ref": "DeploymentPackageKey"}}
      }
    }
  }
}