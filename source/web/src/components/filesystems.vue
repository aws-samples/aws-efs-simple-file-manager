<template>
<div>
    <b-table striped hover :items="filesystems">
        <template v-slot:cell(file_system_id)="data">
            <div v-if="data.item.managed === true">
                <a :href="`/filesystem/${data.value}`">{{ data.value }}</a>
            </div>
            <div v-else>
                <p>{{data.value}}</p>
            </div>
        </template>
        <template v-slot:cell(managed)="data">
            <div v-if="data.value === true">
                <p>{{data.value}}</p>
            </div>
            <div v-else-if="data.value === 'Creating'">
                <b-link href="/" v-b-tooltip.hover title="Lambda creation can take several minutes. Click to refresh.">{{data.value}}</b-link>
            </div>
            <div v-else>
                <a :href="`/configure/${data.item.file_system_id}`">{{ data.value }}</a>
            </div>
        </template>
    </b-table>
</div>
</template>

<script>
import { API } from 'aws-amplify';

export default {
  name: 'filesystems',
  data() {
      return {
          filesystems: []
      }
  },
  mounted: function () {
      this.listFilesystems()
  },
  methods: {
      async listFilesystems() {
          try {
              let response = await API.get('fileManagerApi', '/api/filesystems/')
              this.filesystems = response
          }
          catch (error) {
              alert('Unable to list filesystems, check api logs')
              console.log(error)
          }
      }
  }
}


</script>



<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>


</style>